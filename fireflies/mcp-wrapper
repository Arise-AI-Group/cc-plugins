#!/bin/bash
# MCP wrapper for Fireflies.ai remote MCP server
# Uses npx mcp-remote to proxy to the Fireflies MCP endpoint

# Load API key from cc-plugins config
if [ -f "$HOME/.config/cc-plugins/.env" ]; then
    export $(grep -v '^#' "$HOME/.config/cc-plugins/.env" | grep -v '^$' | xargs)
fi

if [ -z "$FIREFLIES_API_KEY" ]; then
    echo "Error: FIREFLIES_API_KEY not set" >&2
    echo "Add your API key to ~/.config/cc-plugins/.env:" >&2
    echo "  FIREFLIES_API_KEY=your-api-key-here" >&2
    exit 1
fi

exec npx -y mcp-remote https://api.fireflies.ai/mcp \
    --header "Authorization: Bearer $FIREFLIES_API_KEY"
