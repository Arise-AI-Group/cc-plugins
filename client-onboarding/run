#!/bin/bash
# Activate virtual environment and run Python script
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

if [ ! -d "$SCRIPT_DIR/.venv" ]; then
    echo "Virtual environment not found. Run ./setup.sh first."
    exit 1
fi

source "$SCRIPT_DIR/.venv/bin/activate"
cd "$SCRIPT_DIR"

# Convert path like tool/script.py to module: tool.script
if [[ "$1" == *.py ]]; then
    module="${1%.py}"
    module="${module//\//.}"
    shift
    python3 -m "$module" "$@"
else
    python3 "$@"
fi
